webpackJsonp([5],{TmV0:function(e,t,s){s("fZOM"),e.exports=s("FeBl").Object.values},fZOM:function(e,t,s){var n=s("kM2E"),r=s("mbce")(!1);n(n.S,"Object",{values:function(e){return r(e)}})},gRE1:function(e,t,s){e.exports={default:s("TmV0"),__esModule:!0}},mbce:function(e,t,s){var n=s("+E39"),r=s("lktj"),i=s("TcQ7"),c=s("NpIQ").f;e.exports=function(e){return function(t){for(var s,a=i(t),o=r(a),u=o.length,l=0,d=[];u>l;)s=o[l++],n&&!c.call(a,s)||d.push(e?[s,a[s]]:a[s]);return d}}},"v+uL":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("gRE1"),r=s.n(n),i={props:{name:{type:String,required:!1},users:{type:Array,required:!0,deep:!0},actions:{type:Array,required:!1,validadator:function(e){return e.forEach(function(e){if(!(e instanceof Object&&Object.prototype.hasOwnProperty.call(e,"text")&&Object.prototype.hasOwnProperty.call(e,"event")))return!1}),!0}}},methods:{handler:function(e,t){this.$parent.$emit(e,t)}}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"my-4"},[e.name?s("div",{staticClass:"d-flex align-items-center my-4"},[s("h5",{staticClass:"my-1 mr-2"},[e._v(e._s(e.name))]),e._v(" "),s("span",{staticClass:"badge badge-pill badge-outline-secondary"},[e._v(e._s(e.users.length))])]):e._e(),e._v(" "),s("ul",{staticClass:"list-group"},e._l(e.users,function(t,n){return s("li",{key:"user-"+n,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[s("div",{staticClass:"d-flex align-items-center"},[s("img",{staticClass:"mr-3 rounded-circle",attrs:{src:t.picture,width:"48",height:"48"}}),e._v(" "),s("div",[s("span",{staticClass:"d-block"},[e._v(e._s(e._f("capitalize")(t.name)))]),e._v(" "),s("small",[e._v(e._s(t.email))])])]),e._v(" "),e.actions?s("div",e._l(e.actions,function(n,r){return s("a",{key:"action-"+r,staticClass:"badge badge-pill mr-2",class:n.class,attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.handler(n.event,t)}}},[e._v("\n\t\t\t\t\t"+e._s(n.text)+"\n\t\t\t\t")])}),0):e._e()])}),0)])},staticRenderFns:[]},a={data:function(){return{members:[],pending:[]}},mounted:function(){this.syncUsers(),this.$on("accepted",this.requestAccepted),this.$on("declined",this.requestDeclined),this.$on("remove",this.removeUser)},methods:{checkRoute:function(){var e=this,t=this.$route.params.userId;if(t){var s="users/pending/"+t;this.$database.get(s).then(function(s){s&&(s.id=t,"signup-accept"===e.$route.name?e.requestAccepted(s):"signup-revoke"===e.$route.name&&e.requestDeclined(s))}).then(function(){e.$router.push({name:"users"})}).catch(console.error)}},sync:function(e){return this.$database.get("users/"+e)},syncMembers:function(){var e=this;this.sync("members").then(function(t){return e.members=t?r()(t):[]}).catch(function(t){console.error(t),e.$eventbus.$emit("alert",{type:"danger",message:"Error synchronizing members. Check console for more details."})})},syncPendings:function(){var e=this;this.sync("pending").then(function(t){return e.pending=t?r()(t):[]}).catch(function(t){console.error(t),e.$eventbus.$emit("alert",{type:"danger",message:"Error synchronizing pending requests. Check console for more details."})})},syncUsers:function(){this.checkRoute(),this.syncMembers(),this.syncPendings()},requestAccepted:function(e){var t=this,s="users/pending/"+e.id;this.$database.put("users/members",e.id,e).then(function(){t.$database.remove(s).then(function(){t.$eventbus.$emit("alert",{type:"success",message:e.name+" request accepted."}),t.syncUsers()}).catch(function(e){console.error(e),t.$eventbus.$emit("alert",{type:"danger",message:"Error accepting pending request. Check console for more details."})})}).catch(function(e){console.error(e),t.$eventbus.$emit("alert",{type:"danger",message:"Error accepting pending request. Check console for more details."})})},requestDeclined:function(e){var t=this,s="users/pending/"+e.id;this.$database.remove(s).then(function(){t.$eventbus.$emit("alert",{type:"success",message:e.name+" request declined."}),t.syncUsers()}).catch(function(e){console.error(e),t.$eventbus.$emit("alert",{type:"danger",message:"Error accepting pending request. Check console for more details."})})},removeUser:function(e){var t=this;if(this.$storage.get("user").id!==e.id){var s="users/members/"+e.id;this.$database.remove(s).then(function(){t.syncUsers(),t.$eventbus.$emit("alert",{type:"success",message:e.name+" deleted."})}).catch(function(e){console.error(e),t.$eventbus.$emit("alert",{type:"danger",message:"Error removing user. Check console for more details."})})}else this.$eventbus.$emit("alert",{type:"danger",message:"Error removing user. You can't remove yourself."})}},components:{UserList:s("VU/8")(i,c,!1,null,null,null).exports}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[e._m(0),e._v(" "),e.pending.length?s("user-list",{attrs:{name:"Pending",users:e.pending,actions:[{event:"accepted",text:"Accept",class:"badge-success"},{event:"declined",text:"Decline",class:"badge-danger"}]}}):e._e(),e._v(" "),e.members.length?s("user-list",{attrs:{name:"Members",users:e.members,actions:[{event:"remove",text:"Remove",class:"badge-danger"}]}}):e._e()],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h4",{staticClass:"card-title"},[t("i",{staticClass:"fas fa-user-shield mr-2"}),this._v("\n\t\t\tUsers\n\t\t")])}]},u=s("VU/8")(a,o,!1,null,null,null);t.default=u.exports}});
//# sourceMappingURL=5.a0deb52e04a7d66b3308.js.map