webpackJsonp([3],{"1Fk8":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("//Fk"),i=a.n(s),n=a("fZjL"),r=a.n(n),o=a("Xb92"),l=a("ret2"),c=a("DsDf"),u=a("dWUt"),d=a("cuYw"),m={props:{name:{type:String,required:!0},tools:{type:Array,required:!0},required:{type:Boolean,required:!1,default:!1},label:{type:Object,required:!1,validator:function(t){return Object.prototype.hasOwnProperty.call(t,"text")&&"string"==typeof t.text}},value:{required:!1}},watch:{value:function(t){this.tempList=t},dirty:function(t){this.error=this.required&&t&&0===this.tempList.length},tempList:function(t){this.error=this.required&&0===t.length}},data:function(){return{dirty:!1,temp:{title:null,id:null},tempList:[],error:!1}},created:function(){var t=this;this.$parent.$on("submit",function(){t.required&&0===t.tempList.length?(t.error=!0,t.$parent.$emit("invalid",{name:t.name})):t.$parent.$emit("value",{name:t.name,value:t.tempList})})},methods:{addItem:function(){var t=this;this.temp.title&&this.temp.id&&(0==this.tempList.filter(function(e){return e.title===t.temp.title}).length&&this.tempList.push(this.temp),this.temp={title:null,id:null})},removeItem:function(t){var e=this.tempList.indexOf(t);this.tempList.splice(e,1)}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group"},[a("label",{attrs:{for:t.name}},[t.label.iconClass?a("i",{staticClass:"mr-2",class:t.label.iconClass}):t._e(),t._v("\n\t\t"+t._s(t.label.text)+" "),t.required?a("span",{staticClass:"text-danger"},[t._v("*")]):t._e()]),t._v(" "),t.tempList.length?t._e():a("p",{staticClass:"card-text my-4 text-muted"},[t._v("No items added.")]),t._v(" "),a("ul",{staticClass:"list-group my-3"},t._l(t.tempList,function(e,s){return a("li",{key:"i-"+s,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[t._v("\n\t\t\t"+t._s(e.title)+"\n\t\t\t"),a("a",{staticClass:"text-danger",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.removeItem(e)}}},[a("i",{staticClass:"fas fa-trash mr-2"})])])}),0),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.temp,expression:"temp"}],staticClass:"form-control",class:{"is-invalid":t.error},attrs:{id:t.name},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.temp=e.target.multiple?a:a[0]},t.addItem],click:function(e){e.preventDefault(),t.dirty=!0}}},t._l(t.tools,function(e,s){return a("option",{key:"o-"+s,domProps:{value:e}},[t._v("\n\t\t\t"+t._s(e.title)+"\n\t\t")])}),0),t._v(" "),t.error?a("div",{staticClass:"invalid-feedback"},[t._v("\n\t\tRequired or invalid value.\n\t")]):t._e()])},staticRenderFns:[]},f=a("VU/8")(m,p,!1,null,null,null).exports,v={data:function(){return{stackKey:"",stack:{title:"",description:"",tag:"",tools:[],links:[],scope:""},tools:[],tags:["Frontend","Backend","Mobile","Big Data","IoT","Cloud","DevOps","Security","Blockchain","DevOps","Human Computer Interfaces","UX","UI","Machine Intelligence"]}},mounted:function(){this.loadTools(),this.$route.params.id&&"new"!==this.$route.params.id&&this.loadStack(this.$route.params.id)},beforeRouteLeave:function(t,e,a){this.$el.classList.contains("submited")?a():confirm("Changes will be discared... Do you want to continue?")&&a()},methods:{loadTools:function(){var t=this;this.$database.get("tools").then(function(e,a){e&&(t.tools=r()(e).map(function(t){return{title:e[t].title,id:t}}))}).catch(function(e){console.error(e),t.$eventbus.$emit("alert",{type:"danger",message:"Error getting tool info. Check console for more details"})})},loadStack:function(t){var e=this;this.$database.get("stacks/"+t).then(function(a){a.id=t,e.stack=a}).catch(function(t){console.error(t),e.$eventbus.$emit("alert",{type:"danger",message:"Error getting stack info. Check console for more details"})})},valuesWaiter:function(){var t=this,e=new i.a(function(e,a){t.$on("invalid",a),t.$on("value",function(e){return t.stack[e.name]=e.value||null}),setInterval(e,200)});return this.$emit("submit"),e},submitForm:function(){var t=this;this.valuesWaiter().then(function(){t.$route.params.id&&"new"!==t.$route.params.id?t.$database.update("stacks/",t.$route.params.id,t.stack).then(function(){t.$eventbus.$emit("alert",{type:"success",message:"Tool "+t.stack.title+" updated!"})}).catch(function(e){console.error(e),t.$eventbus.$emit("alert",{type:"danger",message:"Error updating tool. Check console for more details"})}):t.$database.append("stacks/",t.stack).then(function(){t.$eventbus.$emit("alert",{type:"success",message:"Tool "+t.stack.title+" created!"})}).catch(function(e){console.error(e),t.$eventbus.$emit("alert",{type:"danger",message:"Error creating tool. Check console for more details"})}),t.$el.classList.add("submited"),t.$router.push({name:"stacks"})}).catch(console.err)}},components:{InputForm:o.a,SelectForm:l.a,MultipleSelectForm:c.a,TextareaForm:u.a,LinkListInput:d.a,ToolsSelectForm:f}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"m-0",on:{submit:function(e){return e.preventDefault(),t.submitForm.apply(null,arguments)}}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h4",{staticClass:"card-title"},[t._v("Stack Form")]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col"},[a("InputForm",{attrs:{name:"title",type:"text",label:{text:"Title",iconClass:"fas fa-file-alt"},required:!0,placeholder:"Stack title or name",value:t.stack.title}})],1),t._v(" "),a("div",{staticClass:"col"},[a("MultipleSelectForm",{attrs:{name:"tag",label:{text:"Tag",iconClass:"fa fa-tags"},options:t.tags,required:!0,value:t.stack.tag}})],1)]),t._v(" "),a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col"},[a("TextareaForm",{attrs:{name:"description",label:{text:"Description",iconClass:"fa fa-align-left"},required:!0,placeholder:"Short description to introduce stack...",value:t.stack.description}})],1)]),t._v(" "),a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col"},[a("ToolsSelectForm",{attrs:{name:"tools",label:{text:"Stack tools",iconClass:"fas fa-toolbox"},required:!0,tools:t.tools,value:t.stack.tools}})],1)]),t._v(" "),a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col"},[a("LinkListInput",{attrs:{name:"links",label:{text:"Links and documentation",iconClass:"fa fa-link"},value:t.stack.links,required:!0}})],1)]),t._v(" "),a("div",{staticClass:"row my-3"},[a("div",{staticClass:"col"},[a("TextareaForm",{attrs:{name:"scope",label:{text:"Scope",iconClass:"fas fa-binoculars"},required:!0,placeholder:"The scope that current stack is thinked for...",value:t.stack.scope}})],1)]),t._v(" "),t._m(1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"card-text text-danger mt-3 mb-5"},[e("i",{staticClass:"fas fa-lock mr-2"}),this._v("Required information")])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-pill btn-primary btn-block mt-5 mb-4",attrs:{type:"submit"}},[e("i",{staticClass:"fas fa-save mr-2"}),this._v("\n\t\t\t\tSave\n\t\t\t")])}]};var b=a("VU/8")(v,h,!1,function(t){a("82Rl")},null,null);e.default=b.exports},"82Rl":function(t,e){},Cdx3:function(t,e,a){var s=a("sB3e"),i=a("lktj");a("uqUo")("keys",function(){return function(t){return i(s(t))}})},fZjL:function(t,e,a){t.exports={default:a("jFbC"),__esModule:!0}},jFbC:function(t,e,a){a("Cdx3"),t.exports=a("FeBl").Object.keys},uqUo:function(t,e,a){var s=a("kM2E"),i=a("FeBl"),n=a("S82l");t.exports=function(t,e){var a=(i.Object||{})[t]||Object[t],r={};r[t]=e(a),s(s.S+s.F*n(function(){a(1)}),"Object",r)}}});
//# sourceMappingURL=3.f0b4180cdcef6b967ba9.js.map